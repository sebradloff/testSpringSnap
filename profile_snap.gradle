ext.propFile = new File("src/main/resources/snap.properties")
ext.propFile.createNewFile()

task setEnv {
    props.load(propFile.newDataInputStream())
    props.setProperty('postgresqlHost', System.getenv("SNAP_DB_PG_HOST"))
    props.setProperty('postgresqlPort', System.getenv("SNAP_DB_PG_PORT"))
    props.setProperty('postgresqlDB', 'app_test')
    props.setProperty('postgresqlUsername', System.getenv("SNAP_DB_PG_USER"))
    props.setProperty('postgresqlPassword', System.getenv("SNAP_DB_PG_PASSWORD"))
    props.setProperty('projectRootDir', project.rootDir.absolutePath)
    props.setProperty('PROFILE', 'snap')
    props.setProperty('oktaCertificate', '')
    props.setProperty('oktaRedirect', '')
    props.setProperty('oktaApiKey', '')
    props.setProperty('oktaUrl', '')
    props.setProperty('oktaEntityId', '')

    props.store(propFile.newWriter(), "Snap environment properties")
}